<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=3">
<meta httpequiv="x-ua-compatible" content="ie=edge">
<meta property="og:type" content="website">
<meta name="author" content="zeromicro">
<meta name="generator" content="Docusaurus v2.0.0-alpha.75">
<link href="https://www.googletagmanager.com" rel="dns-prefetch">
<link href="https://www.google-analytics.com" rel="dns-prefetch">
<link rel="icon" href="https://doc.go-zero.dev/favicon.png">
<link rel="icon" href="https://doc.go-zero.dev/favicon.svg" type="image/svg+xml">
<link rel="apple-touch-icon" href="https://doc.go-zero.dev/img/icons/apple-180x180.png" sizes="180x180">
<meta name="msapplication-config" content="/browserconfig.xml">
<link rel="sitemap" type="application/xml" href="/sitemap.xml">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="go-zero Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="go-zero Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XZD0YKV3XQ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-XZD0YKV3XQ",{anonymize_ip:!0})</script>
<link rel="manifest" href="//manifest.webmanifest">
<meta name="theme-color" content="#d14671">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#21222c"><title data-react-helmet="true">Service Deployment | go-zero</title><meta data-react-helmet="true" property="og:image" content><meta data-react-helmet="true" name="twitter:image" content><meta data-react-helmet="true" name="twitter:description" content="go-zero 是一个集成了各种工程实践的 web 和 rpc 框架。通过弹性设计保障了大并发服务端的稳定性，经受了充分的实战检验。"><meta data-react-helmet="true" name="twitter:title" content="Introduction | go-zero"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for &quot;Introduction | go-zero&quot;"><meta data-react-helmet="true" property="og:title" content="Service Deployment | go-zero"><meta data-react-helmet="true" name="description" content="This section uses jenkins to demonstrate a simple service deployment to k8s."><meta data-react-helmet="true" property="og:description" content="This section uses jenkins to demonstrate a simple service deployment to k8s."><link rel="stylesheet" href="/assets/css/styles.2224638b.css">
</head>
<body itemscope itemtype="http://schema.org/Organization">
<meta itemprop="name" content="">
<meta itemprop="description" content="go-zero 是一个集成了各种工程实践的 web 和 rpc 框架。通过弹性设计保障了大并发服务端的稳定性，经受了充分的实战检验。">
<meta itemprop="url" content="https://doc.go-zero.dev">
<meta itemprop="logo" content="https://doc.go-zero.dev/img/favicon.png">
<meta itemprop="sameAs" content="https://github.com/zeromicro">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar_wBc8 navbar--light navbar--fixed-top"><div class="navbar__inner inner_Y8Z6"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="brand_AtiA" href="/"><img alt="logo" height="30" src="/img/navbar/logo.svg" class="brand_logo_MqNk"><a class="navbar__brand brand_name_O39n">go-zero</a></a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/prepare/prepare">Preparation</a></li><li><a class="dropdown__link" href="/docs/quick-start/quick-start">Getting Started</a></li><li><a class="dropdown__link" href="/docs/advance/advance">Guides</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link" sidebarid="goctl">Goctl</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/goctl/installation">Installation</a></li><li><a class="dropdown__link" href="/docs/goctl/api">API Command</a></li><li><a class="dropdown__link" href="/docs/goctl/zrpc">RPC Command</a></li><li><a class="dropdown__link" href="/docs/goctl/model">Model Command</a></li><li><a class="dropdown__link" href="/docs/goctl/completion">Completion</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link">Tool</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/eco/plugins">Goctl Plugin</a></li><li><a class="dropdown__link" href="/docs/eco/editor">Editor Plugin</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link">Community</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/community/about-us">About us</a></li><li><a class="dropdown__link" href="/docs/community/showcase">Showcase</a></li><li><a class="dropdown__link" href="/docs/community/contribute">Contributing</a></li><li><a class="dropdown__link" href="/docs/community/contributor">Contributor</a></li><li><a href="https://github.com/zeromicro/go-zero" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub</a></li><li><a href="https://discord.gg/4JQvC5A4Fe" target="_blank" rel="noopener noreferrer" class="dropdown__link">Discord</a></li></ul></div><a class="navbar__item navbar__link" sidebarid="blog" href="/docs/blog/blog">Blog</a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link">More</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/resource-center/learning-resource">Resource Center</a></li><li><a href="https://space.bilibili.com/389552232/channel/seriesdetail?sid=2122723" target="_blank" rel="noopener noreferrer" class="dropdown__link">Video Tutorial</a></li><li><a href="https://github.com/zeromicro/go-zero/blob/master/ROADMAP.md" target="_blank" rel="noopener noreferrer" class="dropdown__link">Development Roadmap</a></li><li><a class="dropdown__link" href="/docs/design/design">Design Docs</a></li><li><a class="dropdown__link" href="/docs/faq/troubleshooting">FAQ</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="searchWrapper_f8aU"><div class="navbar__search searchBarContainer_I7kZ"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_Zg7X searchBarLoadingRing_J5Ez"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_CDc6"><kbd class="searchHint_2RRg">ctrl</kbd><kbd class="searchHint_2RRg">K</kbd></div></div></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/docs/deployment/service-deployment" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li><a href="/cn/docs/deployment/service-deployment" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">中文简体</a></li></ul></div><a href="https://github.com/zeromicro/go-zero" class="navbar__items navbar__items--right"><img alt="forks" height="30" src="/img/navbar/github.svg" class="star__fork_dBtt"><div class="star_fork_layout_ROo5"><img alt="stars" height="20" src="https://img.shields.io/github/stars/zeromicro/go-zero?style=social" class="star__fork_dBtt"><img alt="forks" height="20" src="https://img.shields.io/github/forks/zeromicro/go-zero?style=social" class="star__fork_dBtt"></div></a><div class="react-toggle themeToggleInHeading_b3Mq react-toggle--checked react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_iYfV" style="margin-left:2px">🌙</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV" style="margin-left:1px">☀</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand brand_AtiA" href="/">go-zero</a><div class="react-toggle themeToggleInSidebar_qGRI react-toggle--checked react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_iYfV" style="margin-left:2px">🌙</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV" style="margin-left:1px">☀</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Languages</span></span></a><ul class="menu__list"><li class="menu__list-item"><a href="/docs/deployment/service-deployment" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li class="menu__list-item"><a href="/cn/docs/deployment/service-deployment" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">中文简体</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Docs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/prepare/prepare">Preparation</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/quick-start/quick-start">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/advance/advance">Guides</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist" sidebarid="goctl">Goctl</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/goctl/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/goctl/api">API Command</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/goctl/zrpc">RPC Command</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/goctl/model">Model Command</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/goctl/completion">Completion</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Tool</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/eco/plugins">Goctl Plugin</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/eco/editor">Editor Plugin</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Community</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/community/about-us">About us</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/community/showcase">Showcase</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/community/contribute">Contributing</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/community/contributor">Contributor</a></li><li class="menu__list-item"><a href="https://github.com/zeromicro/go-zero" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a href="https://discord.gg/4JQvC5A4Fe" target="_blank" rel="noopener noreferrer" class="menu__link">Discord</a></li></ul></li><li class="menu__list-item"><a class="menu__link" sidebarid="blog" href="/docs/blog/blog">Blog</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">More</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/resource-center/learning-resource">Resource Center</a></li><li class="menu__list-item"><a href="https://space.bilibili.com/389552232/channel/seriesdetail?sid=2122723" target="_blank" rel="noopener noreferrer" class="menu__link">Video Tutorial</a></li><li class="menu__list-item"><a href="https://github.com/zeromicro/go-zero/blob/master/ROADMAP.md" target="_blank" rel="noopener noreferrer" class="menu__link">Development Roadmap</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/design/design">Design Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/faq/troubleshooting">FAQ</a></li></ul></li></ul></div></div></div></nav><div class="wrapper_DIJ0"><div class="doc_D+rh"><div class="doc__sidebar_gVFN" role="complementary"><div class="sidebar_LIo8"><div class="menu menu--responsive thin-scrollbar menu_oAhv"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_nrF-" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" href="/docs/introduction">Introduction</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" href="/docs/concept">Concepts</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!">Preparation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/prepare/prepare">Prepare</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/prepare/dev-flow">Development Flow</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/prepare/golang-install">Golang Installation</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/prepare/gomod-config">Go Module Configuration</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/prepare/goctl-install">Goctl Installation</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/prepare/protoc-install">protoc &amp; protoc-gen-go installation</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/prepare/prepare-other">Other</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!">Development Specification</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/develop/dev-specification">Development Rules</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/develop/naming-spec">Naming Rules</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/develop/coding-spec">Coding Rules</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!">Configuration</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/configuration/api">API Configuration</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/configuration/rpc">RPC Configuration</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/quick-start/quick-start">Quick Start</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/quick-start/monolithic-service">Monolithic Service</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/quick-start/micro-service">Microservices</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!">Guides</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/advance/advance">Index</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/advance/business-dev">Business Developing</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/advance/service-design">Directory Structure</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/advance/model-gen">Model Generation</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/advance/api-coding">API Coding</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/advance/business-coding">Business Coding</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/advance/jwt">JWT</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/advance/middleware">Middleware</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/advance/rpc-call">RPC Implement &amp; Call</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/advance/error-handle">Error Handling</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/advance/template">Template Modification</a></li></ul></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u menu__link--sublist menu__link--active" href="#!">Deployment</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/deployment/ci-cd">CI/CD</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/deployment/log-collection">Log Collection</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menuLink_Zq3u menu__link--active active" tabindex="0" href="/docs/deployment/service-deployment">Service Deployment</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/deployment/service-monitor">Monitor</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="0" href="/docs/deployment/trace">Trace</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menuLink_Zq3u menu__link--sublist" href="#!">FAQ</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/faq/troubleshooting">Trouble Shooting</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" tabindex="-1" href="/docs/faq/error">Error</a></li></ul></li></ul></div></div></div><main class="doc__main_VklL"><div class="padding-vert--lg container doc__item-wrapper_FIxd"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><header><h1 class="docTitle_-X99">Service Deployment</h1></header><div class="markdown"><p>This section uses jenkins to demonstrate a simple service deployment to k8s.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="prepare"></a>Prepare<a class="hash-link" href="#prepare" title="Direct link to heading">#</a></h2><ul><li>k8s cluster installation</li><li>gitlab environment installation</li><li>jenkins environment installation</li><li>redis&amp;mysql&amp;nginx&amp;etcd installation</li><li><a href="/docs/goctl/installation">goctl install</a></li></ul><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>Ensure that goctl is installed on each node of k8s</p><p>Please google for the installation of the above environment, and I will not introduce it here.</p></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="service-deployment"></a>Service deployment<a class="hash-link" href="#service-deployment" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="1relevant-preparations-for-gitlab-code-warehouse"></a>1、Relevant preparations for gitlab code warehouse<a class="hash-link" href="#1relevant-preparations-for-gitlab-code-warehouse" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="11add-ssh-key"></a>1.1、Add SSH Key<a class="hash-link" href="#11add-ssh-key" title="Direct link to heading">#</a></h4><p>Enter gitlab, click on the user center, find <code>Settings</code>, find the <code>SSH Keys</code> tab on the left
<img alt="ssh key" src="/assets/images/ssh-add-key-1fc91c396e8e927e4345207f6cfb1869.png"></p><ul><li>1、View the public key on the machine where jenkins is located</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><div tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">$ </span><span class="token function" style="color:#8be9fd">cat</span><span class="token plain"> ~/.ssh/id_rsa.pub</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><ul><li>2、If not, you need to generate it, if it exists, please skip to step 3</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><div tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">$ ssh-keygen -t rsa -b </span><span class="token number" style="color:#50fa7b">2048</span><span class="token plain"> -C </span><span class="token string" style="color:#f1fa8c">&quot;email@example.com&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><blockquote><p>&quot;<a href="mailto:email@example.com" target="_blank" rel="noopener noreferrer">email@example.com</a>&quot; 可以替换为自己的邮箱</p><p>After completing the generation, repeat the first step</p></blockquote><ul><li>3、Add the public key to gitlab</li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="12upload-the-code-to-the-gitlab-warehouse"></a>1.2、Upload the code to the gitlab warehouse<a class="hash-link" href="#12upload-the-code-to-the-gitlab-warehouse" title="Direct link to heading">#</a></h4><p>Create a new project <code>go-zero-demo</code> and upload the code. Details are not described here.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="2jenkins"></a>2、jenkins<a class="hash-link" href="#2jenkins" title="Direct link to heading">#</a></h3><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="21add-credentials"></a>2.1、Add credentials<a class="hash-link" href="#21add-credentials" title="Direct link to heading">#</a></h4><ul><li>View the private key of the machine where Jenkins is located, which corresponds to the previous gitlab public key</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><div tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">$ </span><span class="token function" style="color:#8be9fd">cat</span><span class="token plain"> id_rsa</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><ul><li><p>Enter jenkins, click on <code>Manage Jenkins</code>-&gt; <code>Manage Credentials</code>
<img alt="credentials" src="/assets/images/jenkins-credentials-67c5d02d364de9ce359864a183f9dbb2.png"></p></li><li><p>Go to the <code>Global Credentials</code> page, add credentials, <code>Username</code> is an identifier, add pipeline later, you know that this identifier represents the credentials of gitlab, and Private Key` is the private key obtained above
<img alt="jenkins-add-credentials" src="/assets/images/jenkins-add-credentials-6571e3a1892342babe2aff11383cd4cf.png"></p></li></ul><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="22-add-global-variables"></a>2.2、 Add global variables<a class="hash-link" href="#22-add-global-variables" title="Direct link to heading">#</a></h4><p>Enter <code>Manage Jenkins</code>-&gt;<code>Configure System</code>, slide to the entry of <code>Global Properties</code>, add docker private warehouse related information, as shown in the figure is <code>docker username</code>, <code>docker user password</code>, <code>docker private warehouse address</code>
<img alt="docker_server" src="/assets/images/docker_env-041478b5f3401eaa8984c63a0b0eb39d.png"></p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>  <code>docker_user</code> your docker username</p><p> <code>docker_pass</code> your docker user password</p><p> <code>docker_server</code> your docker server</p><p> The private warehouse I use here, if you don’t use the private warehouse provided by the cloud vendor, you can build a private warehouse yourself. I won’t go into details here, and you can google it yourself.</p></div></div><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="23configure-git"></a>2.3、Configure git<a class="hash-link" href="#23configure-git" title="Direct link to heading">#</a></h4><p>Go to <code>Manage Jenkins</code>-&gt;<code>Global Tool Configureation</code>, find the Git entry, fill in the path of the git executable file of the machine where jenkins is located, if not, you need to download the Git plugin in the jenkins plugin management.
<img alt="jenkins-git" src="/assets/images/jenkins-git-2704493865e8f639ed334c1db8ce48a9.png"></p><p><img alt="jenkins-configure" src="/assets/images/jenkins-configure-67327d264092ef27617d7f04d1d4383a.png"></p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="24-add-a-pipeline"></a>2.4、 Add a pipeline<a class="hash-link" href="#24-add-a-pipeline" title="Direct link to heading">#</a></h4><blockquote><p>The pipeline is used to build the project, pull code from gitlab-&gt;generate Dockerfile-&gt;deploy to k8s are all done in this step, here is the demo environment, in order to ensure the smooth deployment process,
Need to install jenkins on the machine where one of the nodes of the k8s cluster is located, I installed it on the master here.</p></blockquote><ul><li><p>Get the credential id Go to the credential page and find the credential id whose Username is <code>gitlab</code>
<img alt="jenkins-credentials-id" src="/assets/images/jenkins-credentials-id-375cada8d4e2bc0b9595ea1075115037.png"></p></li><li><p>Go to the jenkins homepage, click on <code>New Item</code>, the name is <code>user</code>
<img alt="jenkins-add-item" src="/assets/images/jenkins-new-item-c75773b46b1a19c8497bfa7e2ec44052.png"></p></li><li><p>View project git address
<img alt="gitlab-git-url" src="/assets/images/gitlab-git-url-f1da68812c259d6a79ae1d6d56dbcb2e.png"></p></li><li><p>Add the service type Choice Parameter, check <code>This project is parameterized in General</code>,
Click <code>Add parameter</code> and select <code>Choice Parameter</code>, add the selected value constant (api, rpc) and the variable (type) of the received value according to the figure, which will be used in the Pipeline script later.
<img alt="jenkins-choice-parameter" src="/assets/images/jenkins-choice-74208d911d8e87e8b3c334623f622b76.png"></p></li><li><p>Configure <code>user</code>, on the <code>user</code> configuration page, swipe down to find <code>Pipeline script</code>, fill in the script content</p></li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI text"><div tabindex="0" class="prism-code language-text codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">pipeline {</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  agent any</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  parameters {</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      gitParameter name: &#x27;branch&#x27;, </span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      type: &#x27;PT_BRANCH&#x27;,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      branchFilter: &#x27;origin/(.*)&#x27;,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      defaultValue: &#x27;master&#x27;,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      selectedValue: &#x27;DEFAULT&#x27;,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      sortMode: &#x27;ASCENDING_SMART&#x27;,</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      description: &#x27;Select the branch&#x27;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  }</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  stages {</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      stage(&#x27;service info&#x27;)    {</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">          steps {</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">              sh &#x27;echo branch: $branch&#x27;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">              sh &#x27;echo build service type：${JOB_NAME}-$type&#x27;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">          }</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      }</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      stage(&#x27;check out&#x27;) {</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">          steps {</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">              checkout([$class: &#x27;GitSCM&#x27;, </span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">              branches: [[name: &#x27;$branch&#x27;]],</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">              doGenerateSubmoduleConfigurations: false, </span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">              extensions: [], </span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">              submoduleCfg: [],</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">              userRemoteConfigs: [[credentialsId: &#x27;${credentialsId}&#x27;, url: &#x27;${gitUrl}&#x27;]]])</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">          }   </span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      }</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      stage(&#x27;get commit_id&#x27;) {</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">          steps {</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">              echo &#x27;get commit_id&#x27;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">              git credentialsId: &#x27;${credentialsId}&#x27;, url: &#x27;${gitUrl}&#x27;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">              script {</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">                  env.commit_id = sh(returnStdout: true, script: &#x27;git rev-parse --short HEAD&#x27;).trim()</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">              }</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">          }</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      }</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      stage(&#x27;goctl version detection&#x27;) {</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">          steps{</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">              sh &#x27;/usr/local/bin/goctl -v&#x27;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">          }</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      }</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      stage(&#x27;Dockerfile Build&#x27;) {</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">          steps{</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">                 sh &#x27;/usr/local/bin/goctl docker -go service/${JOB_NAME}/${type}/${JOB_NAME}.go&#x27;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">                 script{</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">                     env.image = sh(returnStdout: true, script: &#x27;echo ${JOB_NAME}-${type}:${commit_id}&#x27;).trim()</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">                 }</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">                 sh &#x27;echo image：${image}&#x27;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">                 sh &#x27;docker build -t ${image} .&#x27;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">          }</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      }</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      stage(&#x27;Upload to the mirror warehouse&#x27;) {</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">          steps{</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">              sh &#x27;/root/dockerlogin.sh&#x27;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">              sh &#x27;docker tag  ${image} ${dockerServer}/${image}&#x27;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">              sh &#x27;docker push ${dockerServer}/${image}&#x27;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">          }</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      }</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      stage(&#x27;Deploy to k8s&#x27;) {</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">          steps{</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">              script{</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">                  env.deployYaml = sh(returnStdout: true, script: &#x27;echo ${JOB_NAME}-${type}-deploy.yaml&#x27;).trim()</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">                  env.port=sh(returnStdout: true, script: &#x27;/root/port.sh ${JOB_NAME}-${type}&#x27;).trim()</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">              }</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">              sh &#x27;echo ${port}&#x27;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">              sh &#x27;rm -f ${deployYaml}&#x27;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">              sh &#x27;/usr/local/bin/goctl kube deploy -secret dockersecret -replicas 2 -nodePort 3${port} -requestCpu 200 -requestMem 50 -limitCpu 300 -limitMem 100 -name ${JOB_NAME}-${type} -namespace hey-go-zero -image ${dockerServer}/${image} -o ${deployYaml} -port ${port}&#x27;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">              sh &#x27;/usr/bin/kubectl apply -f ${deployYaml}&#x27;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">          }</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      }</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      </span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      stage(&#x27;Clean&#x27;) {</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">          steps{</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">              sh &#x27;docker rmi -f ${image}&#x27;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">              sh &#x27;docker rmi -f ${dockerServer}/${image}&#x27;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">              cleanWs notFailBuild: true</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">          }</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">      }</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  }</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>${credentialsId} should be replaced with your specific credential value, that is, a string of strings in the [Add Credentials] module, ${gitUrl} needs to be replaced with the git warehouse address of your code, other variables in the form of ${xxx} are not required Modify it and keep it as it is.</p></div></div><p><img alt="user-pipepine-script" src="/assets/images/user-pipeline-script-91472316747be2a8ca7fb809569909f5.png"></p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="portsh"></a>port.sh<a class="hash-link" href="#portsh" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI go-zero"><div tabindex="0" class="prism-code language-go-zero codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">case $1 in</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">&quot;user-api&quot;) echo 1000</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">;;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">&quot;user-rpc&quot;) echo 1001</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">;;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">&quot;course-api&quot;) echo 1002</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">;;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">&quot;course-rpc&quot;) echo 1003</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">;;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">&quot;selection-api&quot;) echo 1004</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">esac</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>The content of dockerlogin.sh</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI shell"><div tabindex="0" class="prism-code language-shell codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#8be9fd">docker</span><span class="token plain"> login --username</span><span class="token operator" style="color:#ff79c6">=</span><span class="token variable" style="color:#ff79c6">$docker</span><span class="token plain">-user --password</span><span class="token operator" style="color:#ff79c6">=</span><span class="token variable" style="color:#ff79c6">$docker</span><span class="token plain">-pass </span><span class="token variable" style="color:#ff79c6">$docker</span><span class="token plain">-server</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><ul><li>$docker-user: docker login username</li><li>$docker-pass: docker login user password</li><li>$docker-server: docker private address</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="view-pipeline"></a>View pipeline<a class="hash-link" href="#view-pipeline" title="Direct link to heading">#</a></h2><p><img alt="build with parameters" src="/assets/images/jenkins-build-with-parameters-8bce03ffd4bf1d31f548efe18b250129.png">
<img alt="build with parameters" src="/assets/images/pipeline-d580a601a6778ca75b488df27d2c8aed.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="view-k8s-service"></a>View k8s service<a class="hash-link" href="#view-k8s-service" title="Direct link to heading">#</a></h2><p><img alt="k8s01" src="/assets/images/k8s-01-620cb74196adbc0824b838c576d402ae.png"></p><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="guess-you-wants"></a>Guess you wants<a class="hash-link" href="#guess-you-wants" title="Direct link to heading">#</a></h1><ul><li><a href="https://kubernetes.io/" target="_blank" rel="noopener noreferrer">k8s</a></li><li><a href="https://www.docker.com/" target="_blank" rel="noopener noreferrer">docker</a></li><li><a href="https://www.jenkins.io/zh/doc/book/installing/" target="_blank" rel="noopener noreferrer">jenkins</a></li><li><a href="https://www.jenkins.io/zh/doc/pipeline/tour/hello-world/" target="_blank" rel="noopener noreferrer">jenkins pipeline</a></li><li><a href="http://nginx.org/en/docs/" target="_blank" rel="noopener noreferrer">nginx</a></li><li><a href="https://etcd.io/docs/current/" target="_blank" rel="noopener noreferrer">etcd</a></li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/zeromicro/portal/edit/main/docs/deployment/service-deployment.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2022-05-01T13:05:27.000Z" class="lastUpdatedDate_nN9m">5/1/2022</time></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/deployment/log-collection"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Log Collection</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/deployment/service-monitor"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Monitor »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prepare" class="table-of-contents__link">Prepare</a></li><li><a href="#service-deployment" class="table-of-contents__link">Service deployment</a><ul><li><a href="#1relevant-preparations-for-gitlab-code-warehouse" class="table-of-contents__link">1、Relevant preparations for gitlab code warehouse</a></li><li><a href="#2jenkins" class="table-of-contents__link">2、jenkins</a></li><li><a href="#portsh" class="table-of-contents__link">port.sh</a></li></ul></li><li><a href="#view-pipeline" class="table-of-contents__link">View pipeline</a></li><li><a href="#view-k8s-service" class="table-of-contents__link">View k8s service</a></li></ul></div></div></div></div></main></div></div><footer class="footer_rm3y section_bQ6r"><div class="footer__inner_OWoZ section--inner_6-fB"><div class="footer__column_+a5z footer__column--left_4bpB"><div><img alt="go-zero logo" class="footer__logo_ayM4" height="27" src="/img/footer/go-zero.svg" title="go-zero" width="108"><img alt="stars" height="27" src="https://img.shields.io/github/stars/zeromicro/go-zero?style=social" class="footer__logo_ayM4"><img alt="forks" height="27" src="https://img.shields.io/github/forks/zeromicro/go-zero?style=social" class="footer__logo_ayM4"></div><p class="footer__tagline_b1u+">go-zero is a web and rpc framework that with lots of engineering practices builtin</p><a class="footer__github_okz3 button_f7Ff button--icon_q89D button--secondary_x3vq button--xsmall_fwzy" href="https://github.com/zeromicro/go-zero" rel="noopener noreferrer" target="_blank"><img alt="GitHub logo" height="22" src="/img/github.svg" title="GitHub" width="22">Star us on GitHub</a></div><div class="footer__column_+a5z footer__column--right_FGdI"><div class="footer__links_5pu0"><ul class="footer__items_3d9P"><li class="footer__title_ulcL">zeromicro</li><li class="footer__item_K578"><a class="footer__link_l-+N" href="https://github.com/zeromicro/zero-api" rel="noopener noreferrer" target="_blank">zero-api</a></li><li class="footer__item_K578"><a class="footer__link_l-+N" href="https://github.com/zeromicro/go-queue" rel="noopener noreferrer" target="_blank">go-queue</a></li><li class="footer__item_K578"><a class="footer__link_l-+N" href="https://github.com/zeromicro/awesome-zero" rel="noopener noreferrer" target="_blank">awesome-zero</a></li><li class="footer__item_K578"><a class="footer__link_l-+N" href="https://github.com/zeromicro/zero-examples" rel="noopener noreferrer" target="_blank">zero-example</a></li></ul></div><div class="footer__links_5pu0"><ul class="footer__items_3d9P"><li class="footer__title_ulcL">Community</li><li class="footer__item_K578"><a class="footer__link_l-+N" href="https://github.com/zeromicro/go-zero" rel="noopener noreferrer" target="_blank">GitHub</a></li><li class="footer__item_K578"><a class="footer__link_l-+N" href="https://discord.gg/4JQvC5A4Fe" rel="noopener noreferrer" target="_blank">Discord</a></li></ul></div><div class="footer__links_5pu0"><ul class="footer__items_3d9P"><li class="footer__title_ulcL">Links</li><li class="footer__item_K578"><a class="footer__link_l-+N" href="https://go-zero.dev/cn" rel="noopener noreferrer" target="_blank">Older Doc</a></li><li class="footer__item_K578"><a class="footer__link_l-+N" href="/docs/blog/blog">Blog</a></li><li class="footer__item_K578"><a class="footer__link_l-+N" href="https://github.com/zeromicro/go-zero/blob/master/ROADMAP.md" rel="noopener noreferrer" target="_blank">Roadmap</a></li><li class="footer__item_K578"><a class="footer__link_l-+N" href="https://landscape.cncf.io/?selected=go-zero" rel="noopener noreferrer" target="_blank">CNCF</a></li></ul></div><div class="footer__links_5pu0"><ul class="footer__items_3d9P"><li class="footer__title_ulcL">Chat</li><li class="footer__item_K578"><img alt="discord" width="80" src="/img/footer/discord.png" class="footer__img_4fbU"></li></ul></div></div></div><div class="footer__bottom_rXtt"><p class="footer__copyright_9e29">Copyright © 2022 zeromicro</p><ul><li class="footer__item_K578"><a class="footer__link_l-+N" href="https://github.com/zeromicro/portal/blob/main/LICENSE">License</a></li></ul><p></p></div></footer></div>
<script src="/assets/js/main.8becc357.js" defer="defer"></script>
</body>
</html>