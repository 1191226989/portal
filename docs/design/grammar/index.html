<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=3">
<meta httpequiv="x-ua-compatible" content="ie=edge">
<meta property="og:type" content="website">
<meta name="author" content="zeromicro">
<meta name="generator" content="Docusaurus v2.0.0-alpha.75">
<link href="https://www.googletagmanager.com" rel="dns-prefetch">
<link href="https://www.google-analytics.com" rel="dns-prefetch">
<link rel="icon" href="https://go-zero.dev/favicon.png">
<link rel="icon" href="https://go-zero.dev/favicon.svg" type="image/svg+xml">
<link rel="apple-touch-icon" href="https://go-zero.dev/img/icons/apple-180x180.png" sizes="180x180">
<meta name="msapplication-config" content="/browserconfig.xml">
<link rel="sitemap" type="application/xml" href="/sitemap.xml">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="go-zero Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="go-zero Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XZD0YKV3XQ"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-XZD0YKV3XQ",{anonymize_ip:!0})</script>
<link rel="manifest" href="//manifest.webmanifest">
<meta name="theme-color" content="#d14671">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#21222c"><title data-react-helmet="true">API syntax | go-zero</title><meta data-react-helmet="true" property="og:image" content><meta data-react-helmet="true" name="twitter:image" content><meta data-react-helmet="true" name="twitter:description" content="go-zero 是一个集成了各种工程实践的 web 和 rpc 框架。通过弹性设计保障了大并发服务端的稳定性，经受了充分的实战检验。"><meta data-react-helmet="true" name="twitter:title" content="Introduction | go-zero"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for &quot;Introduction | go-zero&quot;"><meta data-react-helmet="true" property="og:title" content="API syntax | go-zero"><meta data-react-helmet="true" name="description" content="API IDL example"><meta data-react-helmet="true" property="og:description" content="API IDL example"><link rel="stylesheet" href="/assets/css/styles.fb93b395.css">
</head>
<body itemscope itemtype="http://schema.org/Organization">
<meta itemprop="name" content="">
<meta itemprop="description" content="go-zero 是一个集成了各种工程实践的 web 和 rpc 框架。通过弹性设计保障了大并发服务端的稳定性，经受了充分的实战检验。">
<meta itemprop="url" content="https://go-zero.dev">
<meta itemprop="logo" content="https://go-zero.dev/img/favicon.png">
<meta itemprop="sameAs" content="https://github.com/zeromicro">
<script>!function(){function e(e){document.documentElement.setAttribute("data-theme",e)}var t=function(){var e=null;try{e=localStorage.getItem("theme")}catch(e){}return e}();null!==t?e(t):window.matchMedia("(prefers-color-scheme: dark)").matches?e("dark"):window.matchMedia("(prefers-color-scheme: light)").matches?e("light"):e("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar_wBc8 navbar--light navbar--fixed-top"><div class="navbar__inner inner_Y8Z6"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="brand_AtiA" href="/"><img alt="logo" height="30" src="/img/navbar/logo.svg" class="brand_logo_MqNk"><a class="navbar__brand brand_name_O39n">go-zero</a></a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link">Docs</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/prepare/prepare">Preparation</a></li><li><a class="dropdown__link" href="/docs/quick-start/quick-start">Getting Started</a></li><li><a class="dropdown__link" href="/docs/advance/advance">Guides</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link" sidebarid="goctl">goctl</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/goctl/installation">Installation</a></li><li><a class="dropdown__link" href="/docs/goctl/api">API Command</a></li><li><a class="dropdown__link" href="/docs/goctl/zrpc">RPC Command</a></li><li><a class="dropdown__link" href="/docs/goctl/model">Model Command</a></li><li><a class="dropdown__link" href="/docs/goctl/completion">Completion</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link">Tool</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/eco/plugins">Goctl Plugin</a></li><li><a class="dropdown__link" href="/docs/eco/editor">Editor Plugin</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link">Community</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/community/about-us">About us</a></li><li><a class="dropdown__link" href="/docs/community/showcase">Showcase</a></li><li><a class="dropdown__link" href="/docs/community/contribute">Contributing</a></li><li><a class="dropdown__link" href="/docs/community/contributor">Contributor</a></li><li><a href="https://github.com/zeromicro/go-zero" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub</a></li><li><a href="https://discord.gg/4JQvC5A4Fe" target="_blank" rel="noopener noreferrer" class="dropdown__link">Discord</a></li></ul></div><a class="navbar__item navbar__link" sidebarid="blog" href="/docs/blog/blog">Blog</a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link">More</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/resource-center/learning-resource">Resource Center</a></li><li><a href="https://space.bilibili.com/389552232/channel/seriesdetail?sid=2122723" target="_blank" rel="noopener noreferrer" class="dropdown__link">Video Tutorial</a></li><li><a href="https://github.com/zeromicro/go-zero/blob/master/ROADMAP.md" target="_blank" rel="noopener noreferrer" class="dropdown__link">Development Roadmap</a></li><li><a class="dropdown__link" href="/docs/design/design">Design Docs</a></li><li><a class="dropdown__link" href="/docs/faq/troubleshooting">FAQ</a></li></ul></div></div><div class="navbar__items navbar__items--right"><div class="searchWrapper_f8aU"><div class="navbar__search searchBarContainer_I7kZ"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_Zg7X searchBarLoadingRing_J5Ez"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_CDc6"><kbd class="searchHint_2RRg">ctrl</kbd><kbd class="searchHint_2RRg">K</kbd></div></div></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/docs/design/grammar" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li><a href="/cn/docs/design/grammar" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">中文简体</a></li></ul></div><a href="https://github.com/zeromicro/go-zero" class="navbar__items navbar__items--right"><img alt="forks" height="30" src="/img/navbar/github.svg" class="star__fork_dBtt"><div class="star_fork_layout_ROo5"><img alt="stars" height="20" src="https://img.shields.io/github/stars/zeromicro/go-zero?style=social" class="star__fork_dBtt"><img alt="forks" height="20" src="https://img.shields.io/github/forks/zeromicro/go-zero?style=social" class="star__fork_dBtt"></div></a><div class="react-toggle themeToggleInHeading_b3Mq react-toggle--checked react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_iYfV" style="margin-left:2px">🌙</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV" style="margin-left:1px">☀</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand brand_AtiA" href="/">go-zero</a><div class="react-toggle themeToggleInSidebar_qGRI react-toggle--checked react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_iYfV" style="margin-left:2px">🌙</span></div><div class="react-toggle-track-x"><span class="toggle_iYfV" style="margin-left:1px">☀</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Languages</span></span></a><ul class="menu__list"><li class="menu__list-item"><a href="/docs/design/grammar" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li class="menu__list-item"><a href="/cn/docs/design/grammar" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">中文简体</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Docs</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/prepare/prepare">Preparation</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/quick-start/quick-start">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/advance/advance">Guides</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist" sidebarid="goctl">goctl</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/goctl/installation">Installation</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/goctl/api">API Command</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/goctl/zrpc">RPC Command</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/goctl/model">Model Command</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/goctl/completion">Completion</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Tool</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/eco/plugins">Goctl Plugin</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/eco/editor">Editor Plugin</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Community</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/community/about-us">About us</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/community/showcase">Showcase</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/community/contribute">Contributing</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/community/contributor">Contributor</a></li><li class="menu__list-item"><a href="https://github.com/zeromicro/go-zero" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li><li class="menu__list-item"><a href="https://discord.gg/4JQvC5A4Fe" target="_blank" rel="noopener noreferrer" class="menu__link">Discord</a></li></ul></li><li class="menu__list-item"><a class="menu__link" sidebarid="blog" href="/docs/blog/blog">Blog</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">More</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/resource-center/learning-resource">Resource Center</a></li><li class="menu__list-item"><a href="https://space.bilibili.com/389552232/channel/seriesdetail?sid=2122723" target="_blank" rel="noopener noreferrer" class="menu__link">Video Tutorial</a></li><li class="menu__list-item"><a href="https://github.com/zeromicro/go-zero/blob/master/ROADMAP.md" target="_blank" rel="noopener noreferrer" class="menu__link">Development Roadmap</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/design/design">Design Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/faq/troubleshooting">FAQ</a></li></ul></li></ul></div></div></div></nav><div class="wrapper_DIJ0"><div class="doc_D+rh"><div class="doc__sidebar_gVFN" role="complementary"><div class="sidebar_LIo8"><div class="menu menu--responsive thin-scrollbar menu_oAhv"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_nrF-" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" href="/docs/design/design">Framework Design</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" href="/docs/design/go-zero-design">Go-Zero Design</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" href="/docs/design/go-zero-features">Go-Zero Features</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menuLink_Zq3u menu__link--active active" href="/docs/design/grammar">API syntax</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" href="/docs/design/api-dir">API directory introduction</a></li><li class="menu__list-item"><a class="menu__link menuLink_Zq3u" href="/docs/design/rpc-dir">RPC Directory Structure</a></li></ul></div></div></div><main class="doc__main_VklL"><div class="padding-vert--lg container doc__item-wrapper_FIxd"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><header><h1 class="docTitle_-X99">API syntax</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="api-idl-example"></a>API IDL example<a class="hash-link" href="#api-idl-example" title="Direct link to heading">#</a></h2><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI go"><div tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#6272a4">/**</span></div><div class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#6272a4"> * api syntax example and syntax description</span></div><div class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#6272a4"> */</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#6272a4">// api syntax version</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">syntax </span><span class="token operator" style="color:#ff79c6">=</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">&quot;v1&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#6272a4">// import literal</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#ff79c6">import</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">&quot;foo.api&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#6272a4">// import group</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#ff79c6">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token string" style="color:#f1fa8c">&quot;bar.api&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token string" style="color:#f1fa8c">&quot;foo/bar.api&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#8be9fd">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    author</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">&quot;anqiansong&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    date</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain">   </span><span class="token string" style="color:#f1fa8c">&quot;2020-01-08&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    desc</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain">   </span><span class="token string" style="color:#f1fa8c">&quot;api syntax example and syntax description&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#6272a4">// type literal</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#ff79c6">type</span><span class="token plain"> Foo</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    Foo </span><span class="token builtin" style="color:#bd93f9">int</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">`json:&quot;foo&quot;`</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#6272a4">// type group</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#ff79c6">type</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    Bar</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        Bar </span><span class="token builtin" style="color:#bd93f9">int</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">`json:&quot;bar&quot;`</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#6272a4">// service block</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">@</span><span class="token function" style="color:#8be9fd">server</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    jwt</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain">   Auth</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    group</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> foo</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">service foo</span><span class="token operator" style="color:#ff79c6">-</span><span class="token plain">api</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    @doc </span><span class="token string" style="color:#f1fa8c">&quot;foo&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    @handler foo</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    post </span><span class="token operator" style="color:#ff79c6">/</span><span class="token plain">foo </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">Foo</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> returns </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">Bar</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="api-syntax-structure"></a>API syntax structure<a class="hash-link" href="#api-syntax-structure" title="Direct link to heading">#</a></h2><ul><li>syntax statement</li><li>import syntax block</li><li>info syntax block</li><li>type syntax block</li><li>service syntax block</li><li>hidden channel</li></ul><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>In the above grammatical structure, grammatically speaking, each grammar block can be declared anywhere in the .api file according to the grammatical block.&gt; But in order to improve reading efficiency, we suggest to declare in the above order, because it may be in the future Strict mode is used to control the order of syntax blocks.</p></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="syntax-statement"></a>syntax statement<a class="hash-link" href="#syntax-statement" title="Direct link to heading">#</a></h3><p>syntax is a newly added grammatical structure, the introduction of the grammar can solve:</p><ul><li>Quickly locate the problematic grammatical structure of the api version</li><li>Syntax analysis for the version</li><li>Prevent the big version upgrade of api syntax from causing backward compatibility</li></ul><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>The imported api must be consistent with the syntax version of the main api.</p></div></div><p><strong>Grammar definition</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI antlrv4"><div tabindex="0" class="prism-code language-antlrv4 codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">&#x27;syntax&#x27;={checkVersion(p)}STRING</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p><strong>Grammar description</strong></p><p>syntax: Fixed token, marking the beginning of a syntax structure</p><p>checkVersion: Custom go method to detect whether <code>STRING</code> is a legal version number. The current detection logic is that STRING must meet the regularity of <code>(?m)&quot;v[1-9][0-9]&quot;</code>.</p><p>STRING: A string of English double quotes, such as &quot;v1&quot;</p><p>An api grammar file can only have 0 or 1 syntax statement. If there is no syntax, the default version is <code>v1</code></p><p><strong>Examples of correct syntax</strong> ✅</p><p>eg1: Irregular writing</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI go"><div tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">syntax</span><span class="token operator" style="color:#ff79c6">=</span><span class="token string" style="color:#f1fa8c">&quot;v1&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>eg2: Standard writing (recommended)</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI go"><div tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">syntax </span><span class="token operator" style="color:#ff79c6">=</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">&quot;v2&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p><strong>Examples of incorrect syntax</strong> ❌</p><p>eg1：</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI go"><div tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">syntax </span><span class="token operator" style="color:#ff79c6">=</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">&quot;v0&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>eg2：</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI go"><div tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">syntax </span><span class="token operator" style="color:#ff79c6">=</span><span class="token plain"> v1</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>eg3：</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI go"><div tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">syntax </span><span class="token operator" style="color:#ff79c6">=</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">&quot;V1&quot;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="import-syntax-block"></a>Import syntax block<a class="hash-link" href="#import-syntax-block" title="Direct link to heading">#</a></h2><p>As the business scale increases, there are more and more structures and services defined in the api.
All the grammatical descriptions are in one api file. This is a problem, and it will greatly increase the difficulty of reading and maintenance.
Import The grammar block can help us solve this problem. By splitting the api file, different api files are declared according to certain rules,
which can reduce the difficulty of reading and maintenance.</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>Import here does not include package declarations like golang, it is just the introduction of a file path. After the final analysis, all the declarations will be gathered into a spec.Spec.
You cannot import multiple identical paths, otherwise it will cause parsing errors.</p></div></div><p><strong>Grammar definition</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI antlrv4"><div tabindex="0" class="prism-code language-antlrv4 codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">&#x27;import&#x27; {checkImportValue(p)}STRING  </span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">|&#x27;import&#x27; &#x27;(&#x27; ({checkImportValue(p)}STRING)+ &#x27;)&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p><strong>Grammar description</strong></p><p>import: fixed token, marking the beginning of an import syntax</p><p>checkImportValue: Custom go method to detect whether <code>STRING</code> is a legal file path. The current detection logic is that STRING must satisfy <code>(?m)&quot;(?[az AZ 0-9_-])+\. api&quot;</code> regular.</p><p>STRING: A string of English double quotes, such as &quot;foo.api&quot;</p><p><strong>Examples of correct syntax</strong> ✅</p><p>eg：</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI go"><div tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#ff79c6">import</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">&quot;foo.api&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#ff79c6">import</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">&quot;foo/bar.api&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#ff79c6">import</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token string" style="color:#f1fa8c">&quot;bar.api&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token string" style="color:#f1fa8c">&quot;foo/bar/foo.api&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p><strong>Examples of incorrect syntax</strong> ❌</p><p>eg：</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI go"><div tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#ff79c6">import</span><span class="token plain"> foo</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">api</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#ff79c6">import</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">&quot;foo.txt&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#ff79c6">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    bar</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">api</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    bar</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">api</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="info-syntax-block"></a>info syntax block<a class="hash-link" href="#info-syntax-block" title="Direct link to heading">#</a></h2><p>The info grammar block is a grammar body that contains multiple key-value pairs.
Its function is equivalent to the description of an api service. The parser will map it to spec.Spec for translation into other languages ​​(golang, java, etc.)
Is the meta element that needs to be carried. If it is just a description of the current api, without considering its translation to other languages,
you can use simple multi-line comments or java-style documentation comments. For comment descriptions, please refer to the hidden channels below.</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>Duplicate keys cannot be used, each api file can only have 0 or 1 info syntax block</p></div></div><p><strong>Grammar definition</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI antlrv4"><div tabindex="0" class="prism-code language-antlrv4 codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">&#x27;info&#x27; &#x27;(&#x27; (ID {checkKeyValue(p)}VALUE)+ &#x27;)&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p><strong>Grammar description</strong></p><p>info: fixed token, marking the beginning of an info syntax block</p><p>checkKeyValue: Custom go method to check whether <code>VALUE</code> is a legal value.</p><p>VALUE: The value corresponding to the key, which can be any character after a single line except&#x27;\r&#x27;,&#x27;\n&#x27;,&#x27;&#x27;. For multiple lines, please wrap it with &quot;&quot;, but it is strongly recommended that everything be wrapped with &quot;&quot;</p><p><strong>Examples of correct syntax</strong> ✅</p><p>eg1：Irregular writing</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI go"><div tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#8be9fd">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">foo</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> foo value</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">bar</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token string" style="color:#f1fa8c">&quot;bar value&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    desc</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain">&quot;long long long long</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">long long text&quot;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>eg2：Standard writing (recommended)</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI go"><div tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#8be9fd">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    foo</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">&quot;foo value&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    bar</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">&quot;bar value&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    desc</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">&quot;long long long long long long text&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p><strong>Examples of incorrect syntax</strong> ❌</p><p>eg1：No key-value</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI go"><div tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#8be9fd">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>eg2：Does not contain colon</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI go"><div tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#8be9fd">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    foo value</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>eg3：key-value does not wrap</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI go"><div tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#8be9fd">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">foo</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token string" style="color:#f1fa8c">&quot;value&quot;</span><span class="token punctuation" style="color:#f8f8f2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>eg4：No key</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI go"><div tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#8be9fd">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">&quot;value&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>eg5：Illegal key</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI go"><div tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#8be9fd">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token number" style="color:#50fa7b">12</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">&quot;value&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>eg6：Remove the old version of multi-line syntax</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI go"><div tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token function" style="color:#8be9fd">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    foo</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token operator" style="color:#ff79c6">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    some text</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token operator" style="color:#ff79c6">&lt;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="type-syntax-block"></a>type syntax block<a class="hash-link" href="#type-syntax-block" title="Direct link to heading">#</a></h2><p>In the api service, we need to use a structure (class) as the carrier of the request body and the response body.
Therefore, we need to declare some structures to accomplish this. The type syntax block evolved from the type of golang.
Of course It also retains some of the characteristics of golang type, and the following golang characteristics are used:</p><ul><li>Keep the built-in data types of golang <code>bool</code>,<code>int</code>,<code>int8</code>,<code>int16</code>,<code>int32</code>,<code>int64</code>,<code>uint</code>,<code>uint8</code>,<code>uint16</code>,<code>uint32</code>,<code>uint64</code>,<code>uintptr</code>
,<code>float32</code>,<code>float64</code>,<code>complex64</code>,<code>complex128</code>,<code>string</code>,<code>byte</code>,<code>rune</code>,</li><li>Compatible with golang struct style declaration</li><li>Keep golang keywords</li></ul><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><ul><li>Does not support alias</li><li>Does not support <code>time.Time</code> type, because client code is generated from API file, and not all client languages support <code>time.Time</code> related types</li><li>Structure name, field name, cannot be a golang keyword</li></ul></div></div><p><strong>Grammar definition</strong></p><p>Since it is similar to golang, it will not be explained in detail. Please refer to the typeSpec definition in <a href="https://github.com/zeromicro/go-zero/blob/master/tools/goctl/api/parser/g4/ApiParser.g4" target="_blank" rel="noopener noreferrer">ApiParser.g4</a> for the specific syntax definition.</p><p><strong>Grammar description</strong></p><p>Refer to golang writing</p><p><strong>Examples of correct syntax</strong> ✅</p><p>eg1：Irregular writing</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI go"><div tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#ff79c6">type</span><span class="token plain"> Foo </span><span class="token keyword" style="color:#ff79c6">struct</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    Id </span><span class="token builtin" style="color:#bd93f9">int</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">`path:&quot;id&quot;`</span><span class="token plain"> </span><span class="token comment" style="color:#6272a4">// ①</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    Foo </span><span class="token builtin" style="color:#bd93f9">int</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">`json:&quot;foo&quot;`</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#ff79c6">type</span><span class="token plain"> Bar </span><span class="token keyword" style="color:#ff79c6">struct</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#6272a4">// Non-exported field</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    bar </span><span class="token builtin" style="color:#bd93f9">int</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">`form:&quot;bar&quot;`</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#ff79c6">type</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#6272a4">// Non-derived structure</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    fooBar </span><span class="token keyword" style="color:#ff79c6">struct</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        FooBar </span><span class="token builtin" style="color:#bd93f9">int</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>eg2: Standard writing (recommended)</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI go"><div tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#ff79c6">type</span><span class="token plain"> Foo</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    Id </span><span class="token builtin" style="color:#bd93f9">int</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">`path:&quot;id&quot;`</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    Foo </span><span class="token builtin" style="color:#bd93f9">int</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">`json:&quot;foo&quot;`</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#ff79c6">type</span><span class="token plain"> Bar</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    Bar </span><span class="token builtin" style="color:#bd93f9">int</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">`form:&quot;bar&quot;`</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#ff79c6">type</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    FooBar</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">        FooBar </span><span class="token builtin" style="color:#bd93f9">int</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">)</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p><strong>Examples of incorrect syntax</strong> ❌</p><p>eg</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI go"><div tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token keyword" style="color:#ff79c6">type</span><span class="token plain"> Gender </span><span class="token builtin" style="color:#bd93f9">int</span><span class="token plain"> </span><span class="token comment" style="color:#6272a4">// not support</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#6272a4">// Non-struct token</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#ff79c6">type</span><span class="token plain"> Foo structure</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"> </span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  CreateTime time</span><span class="token punctuation" style="color:#f8f8f2">.</span><span class="token plain">Time </span><span class="token comment" style="color:#6272a4">// Does not support time.Time</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#6272a4">// golang keyword var</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#ff79c6">type</span><span class="token plain"> </span><span class="token keyword" style="color:#ff79c6">var</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"> </span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#ff79c6">type</span><span class="token plain"> Foo</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#6272a4">// golang keyword interface</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  Foo </span><span class="token keyword" style="color:#ff79c6">interface</span><span class="token plain"> </span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#ff79c6">type</span><span class="token plain"> Foo</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  foo </span><span class="token builtin" style="color:#bd93f9">int</span><span class="token plain"> </span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#6272a4">// The map key must have the built-in data type of golang</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  m </span><span class="token keyword" style="color:#ff79c6">map</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token plain">Bar</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token builtin" style="color:#bd93f9">string</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>①</h5></div><div class="admonition-content"><p>The tag definition is the same as the json tag syntax in golang. In addition to the json tag, go-zero also provides some other tags to describe the fields,
See the table below for details.</p></div></div><ul><li><p>tag table</p><p>When binding parameters, only one of the following four tags can be selected</p><table><tr><td>tag key</td> <td>Description</td> <td>Provider</td><td>Effective Coverage</td> <td>Example</td></tr><tr><td>json</td> <td>Json serialization tag</td> <td>golang</td> <td>request、response</td> <td><code>json:&quot;fooo&quot;</code></td></tr><tr><td>path</td> <td>Routing path, such as<code>/foo/:id</code></td> <td>go-zero</td> <td>request</td> <td><code>path:&quot;id&quot;</code></td></tr><tr><td>form</td> <td>Mark that the request body is a form (in the POST method) or a query (in the GET method)<code>/search?name=keyword</code>)</td> <td>go-zero</td> <td>request</td> <td><code>form:&quot;name&quot;</code></td></tr><tr><td>header</td> <td>Parse values from HTTP headers, like <code>Name: value</code></td> <td>go-zero</td> <td>request</td> <td><code>header:&quot;name&quot;</code></td></tr></table></li><li><p>tag modifier</p><p>Common parameter verification description</p><table><tr><td>tag key </td> <td>Description </td> <td>Provider </td> <td>Effective Coverage </td> <td>Example </td></tr><tr><td>optional</td> <td>Define the current field as an optional parameter</td> <td>go-zero</td> <td>request</td> <td><code>json:&quot;name,optional&quot;</code></td></tr><tr><td>options</td> <td>Define the enumeration value of the current field, separated by a vertical bar <code>|</code></td> <td>go-zero</td> <td>request</td> <td><code>json:&quot;gender,options=male&quot;</code></td></tr><tr><td>default</td> <td>Define the default value of the current field</td> <td>go-zero</td> <td>request</td> <td><code>json:&quot;gender,default=male&quot;</code></td></tr><tr><td>range</td> <td>Define the value range of the current field</td> <td>go-zero</td> <td>request</td> <td><code>json:&quot;age,range=[0:120]&quot;</code></td></tr></table><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>The tag modifier needs to be separated by a quotation comma after the tag value</p></div></div></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="service-syntax-block"></a>service syntax block<a class="hash-link" href="#service-syntax-block" title="Direct link to heading">#</a></h2><p>The service syntax block is used to define api services, including service name, service metadata, middleware declaration, routing, handler, etc.</p><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><ul><li>The service name of the main api and the imported api must be the same, and there must be no ambiguity in the service name.</li><li>The handler name cannot be repeated</li><li>The name of the route (request method + request path) cannot be repeated</li><li>The request body must be declared as a normal (non-pointer) struct, and the response body has been processed for forward compatibility. Please refer to the following description for details</li></ul></div></div><p><strong>Grammar definition</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI antlrv4"><div tabindex="0" class="prism-code language-antlrv4 codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">serviceSpec:    atServer? serviceApi;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">atServer:       &#x27;@server&#x27; lp=&#x27;(&#x27; kvLit+ rp=&#x27;)&#x27;;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">serviceApi:     {match(p,&quot;service&quot;)}serviceToken=ID serviceName lbrace=&#x27;{&#x27; serviceRoute* rbrace=&#x27;}&#x27;;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">serviceRoute:   atDoc? (atServer|atHandler) route;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">atDoc:          &#x27;@doc&#x27; lp=&#x27;(&#x27;? ((kvLit+)|STRING) rp=&#x27;)&#x27;?;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">atHandler:      &#x27;@handler&#x27; ID;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">route:          {checkHttpMethod(p)}httpMethod=ID path request=body? returnToken=ID? response=replybody?;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">body:           lp=&#x27;(&#x27; (ID)? rp=&#x27;)&#x27;;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">replybody:      lp=&#x27;(&#x27; dataType? rp=&#x27;)&#x27;;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">// kv</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">kvLit:          key=ID {checkKeyValue(p)}value=LINE_VALUE;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">serviceName:    (ID &#x27;-&#x27;?)+;</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">path:           ((&#x27;/&#x27; (ID (&#x27;-&#x27; ID)*))|(&#x27;/:&#x27; (ID (&#x27;-&#x27; ID)?)))+;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p><strong>Grammar description</strong></p><p>serviceSpec: Contains an optional syntax block <code>atServer</code> and <code>serviceApi</code> syntax block, which follow the sequence mode (the service must be written in order, otherwise it will be parsed incorrectly)</p><p>atServer: Optional syntax block, defining server metadata of the key-value structure,&#x27;@server&#x27; indicates the beginning of this server syntax block, which can be used to describe serviceApi or route syntax block, and it has some special keys when it is used to describe different syntax blocks key needs attention，see <strong>atServerKey Key Description</strong>。</p><p>serviceApi: Contains one or more <code>serviceRoute</code> syntax blocks</p><p>serviceRoute: Contains <code>atDoc</code>, handler and <code>route</code> in sequence mode</p><p>atDoc: Optional syntax block, a key-value description of a route, which will be passed to the spec.Spec structure after parsing. If you don&#x27;t care about passing it to spec.Spec, it is recommended to use a single-line comment instead.</p><p>handler: It is a description of the handler layer of routing. You can specify the handler name by specifying the <code>handler</code> key by atServer, or you can directly use the atHandler syntax block to define the handler name</p><p>atHandler: <code>@handler</code> fixed token, followed by a value following the regularity <code>[_a-zA-Z][a-zA-Z_-]</code>, used to declare a handler name</p><p>route: Routing consists of <code>httpMethod</code>, <code>path</code>, optional <code>request</code>, optional <code>response</code>, and <code>httpMethod</code> must be lowercase.</p><p>body: api request body grammar definition, it must be an optional ID value wrapped by ()</p><p>replyBody: api response body grammar definition, must be a struct wrapped by ()、<del>array(Forward compatible processing, it may be discarded in the future, it is strongly recommended to wrap it in struct instead of using array directly as the response body)</del></p><p>kvLit: Same as info key-value</p><p>serviceName: There can be multiple&#x27;-&#x27;join ID values</p><p>path: The api request path must start with <code>/</code> or <code>/:</code>, and must not end with <code>/</code>. The middle can contain ID or multiple ID strings with <code>-</code> join</p><p><strong>atServerKey Key Description</strong></p><p>When modifying the service</p><table><tr><td>key</td><td>Description</td><td>Example</td></tr><tr><td>jwt</td><td>Declare that all routes under the current service require jwt authentication, and code containing jwt logic will be automatically generated</td><td><code>jwt: Auth</code></td></tr><tr><td>group</td><td>Declare the current service or routing file group</td><td><code>group: login</code></td></tr><tr><td>middleware</td><td>Declare that the current service needs to open the middleware</td><td><code>middleware: AuthMiddleware</code></td></tr><tr><td>prefix</td><td>Declare a route prefix</td><td><code>prefix: /api</code></td></tr></table><p>When modifying the route</p><table><tr><td>key</td><td>Description</td><td>Example</td></tr><tr><td>handler</td><td>Declare a handler</td><td>-</td></tr></table><p><strong>Examples of correct syntax</strong> ✅</p><p>eg1：Irregular writing</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI go"><div tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">@</span><span class="token function" style="color:#8be9fd">server</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  jwt</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> Auth</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  group</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> foo</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  middleware</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> AuthMiddleware</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  prefix</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token operator" style="color:#ff79c6">/</span><span class="token plain">api</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">service foo</span><span class="token operator" style="color:#ff79c6">-</span><span class="token plain">api</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  @</span><span class="token function" style="color:#8be9fd">doc</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    summary</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> foo</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  @</span><span class="token function" style="color:#8be9fd">server</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    handler</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> foo</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#6272a4">// Non-exported body</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  post </span><span class="token operator" style="color:#ff79c6">/</span><span class="token plain">foo</span><span class="token operator" style="color:#ff79c6">/</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain">id </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">foo</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> returns </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">bar</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  @doc </span><span class="token string" style="color:#f1fa8c">&quot;bar&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  @handler bar</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  post </span><span class="token operator" style="color:#ff79c6">/</span><span class="token plain">bar returns </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token punctuation" style="color:#f8f8f2">[</span><span class="token punctuation" style="color:#f8f8f2">]</span><span class="token builtin" style="color:#bd93f9">int</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token comment" style="color:#6272a4">// Array is not recommended as response body</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  @handler fooBar</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  post </span><span class="token operator" style="color:#ff79c6">/</span><span class="token plain">foo</span><span class="token operator" style="color:#ff79c6">/</span><span class="token plain">bar </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">Foo</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> returns </span><span class="token comment" style="color:#6272a4">// You can omit &#x27;returns&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p>eg2：Standard writing (recommended)</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI go"><div tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">@</span><span class="token function" style="color:#8be9fd">server</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  jwt</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> Auth</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  group</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> foo</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  middleware</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> AuthMiddleware</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  prefix</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> </span><span class="token operator" style="color:#ff79c6">/</span><span class="token plain">api</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">service foo</span><span class="token operator" style="color:#ff79c6">-</span><span class="token plain">api</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  @doc </span><span class="token string" style="color:#f1fa8c">&quot;foo&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  @handler foo</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  post </span><span class="token operator" style="color:#ff79c6">/</span><span class="token plain">foo</span><span class="token operator" style="color:#ff79c6">/</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain">id </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">Foo</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> returns </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">Bar</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">service foo</span><span class="token operator" style="color:#ff79c6">-</span><span class="token plain">api</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  @handler ping</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  get </span><span class="token operator" style="color:#ff79c6">/</span><span class="token plain">ping</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  @doc </span><span class="token string" style="color:#f1fa8c">&quot;foo&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  @handler bar</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  post </span><span class="token operator" style="color:#ff79c6">/</span><span class="token plain">bar</span><span class="token operator" style="color:#ff79c6">/</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain">id </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">Foo</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p><strong>Examples of incorrect syntax</strong> ❌</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI go"><div tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#6272a4">// Empty server syntax block is not supported</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">@</span><span class="token function" style="color:#8be9fd">server</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#6272a4">// Empty service syntax block is not supported</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">service foo</span><span class="token operator" style="color:#ff79c6">-</span><span class="token plain">api</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">service foo</span><span class="token operator" style="color:#ff79c6">-</span><span class="token plain">api</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  @doc kkkk </span><span class="token comment" style="color:#6272a4">// The short version of the doc must be enclosed in English double quotation marks</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  @handler foo</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  post </span><span class="token operator" style="color:#ff79c6">/</span><span class="token plain">foo</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  @handler foo </span><span class="token comment" style="color:#6272a4">// Duplicate handler</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  post </span><span class="token operator" style="color:#ff79c6">/</span><span class="token plain">bar</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  @handler fooBar</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  post </span><span class="token operator" style="color:#ff79c6">/</span><span class="token plain">bar </span><span class="token comment" style="color:#6272a4">// Duplicate routing</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#6272a4">// @handler and @doc are in the wrong order</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  @handler someHandler</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  @doc </span><span class="token string" style="color:#f1fa8c">&quot;some doc&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  post </span><span class="token operator" style="color:#ff79c6">/</span><span class="token plain">some</span><span class="token operator" style="color:#ff79c6">/</span><span class="token plain">path</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#6272a4">// handler is missing</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  post </span><span class="token operator" style="color:#ff79c6">/</span><span class="token plain">some</span><span class="token operator" style="color:#ff79c6">/</span><span class="token plain">path</span><span class="token operator" style="color:#ff79c6">/</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain">id</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  @handler reqTest</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  post </span><span class="token operator" style="color:#ff79c6">/</span><span class="token plain">foo</span><span class="token operator" style="color:#ff79c6">/</span><span class="token plain">req </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token operator" style="color:#ff79c6">*</span><span class="token plain">Foo</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token comment" style="color:#6272a4">// Data types other than ordinary structures are not supported as the request body</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  @handler replyTest</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  post </span><span class="token operator" style="color:#ff79c6">/</span><span class="token plain">foo</span><span class="token operator" style="color:#ff79c6">/</span><span class="token plain">reply returns </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token operator" style="color:#ff79c6">*</span><span class="token plain">Foo</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token comment" style="color:#6272a4">// Does not support data types other than ordinary structures and arrays (forward compatibility, later considered to be discarded) as response bodies</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="hidden-channel"></a>Hidden channel<a class="hash-link" href="#hidden-channel" title="Direct link to heading">#</a></h2><p>Hidden channels are currently mainly blank symbols, newline symbols and comments. Here we only talk about comments, because blank symbols and newline symbols are currently useless.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="single-line-comment"></a>Single line comment<a class="hash-link" href="#single-line-comment" title="Direct link to heading">#</a></h3><p><strong>Grammar definition</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI antlrv4"><div tabindex="0" class="prism-code language-antlrv4 codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">&#x27;//&#x27; ~[\r\n]*</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p><strong>Grammar description</strong>
It can be known from the grammatical definition that single-line comments must start with <code>//</code>, and the content cannot contain newline characters</p><p><strong>Examples of correct syntax</strong> ✅</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI go"><div tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#6272a4">// doc</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#6272a4">// comment</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p><strong>Examples of incorrect syntax</strong> ❌</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI go"><div tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#6272a4">// break</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">line comments</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="java-style-documentation-comments"></a>java style documentation comments<a class="hash-link" href="#java-style-documentation-comments" title="Direct link to heading">#</a></h3><p><strong>Grammar definition</strong></p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI antlrv4"><div tabindex="0" class="prism-code language-antlrv4 codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token plain">&#x27;/*&#x27; .*? &#x27;*/&#x27;</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p><strong>Grammar description</strong></p><p>It can be known from the grammar definition that a single line comment must start with any character that starts with <code>/*</code> and ends with <code>*/</code>.</p><p><strong>Examples of correct syntax</strong> ✅</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI go"><div tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#6272a4">/**</span></div><div class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#6272a4"> * java-style doc</span></div><div class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#6272a4"> */</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><p><strong>Examples of incorrect syntax</strong> ❌</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI go"><div tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#6272a4">/*</span></div><div class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#6272a4"> * java-style doc */</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"> </span><span class="token operator" style="color:#ff79c6">*</span><span class="token operator" style="color:#ff79c6">/</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_WiXH" id="doccomment"></a>Doc&amp;Comment<a class="hash-link" href="#doccomment" title="Direct link to heading">#</a></h2><p>If you want to get the doc or comment of a certain element, how do you define it?</p><p><strong>Doc</strong></p><p>We stipulate that the number of lines in the previous grammar block (non-hidden channel content)
line+1 to all comments (the current line, or multiple lines) before the first element of the current grammar block are doc，
And retain the original mark of <code>//</code>, <code>/*</code>, <code>*/</code>.</p><p><strong>Comment</strong></p><p>We specify that a comment block (the current line, or multiple lines) at the beginning of the line where the last element of the current syntax block is located is comment,
And retain the original mark of <code>//</code>, <code>/*</code>, <code>*/</code>.</p><p>Syntax block <strong>Doc</strong> and <strong>Comment</strong> support situation</p><table><tr><td>Syntax block</td><td>Parent Syntax Block</td><td>Doc</td><td>Comment</td></tr><tr><td>syntaxLit</td><td>api</td><td>✅</td><td>✅</td></tr><tr><td>kvLit</td><td>infoSpec</td><td>✅</td><td>✅</td></tr><tr><td>importLit</td><td>importSpec</td><td>✅</td><td>✅</td></tr><tr><td>typeLit</td><td>api</td><td>✅</td><td>❌</td></tr><tr><td>typeLit</td><td>typeBlock</td><td>✅</td><td>❌</td></tr><tr><td>field</td><td>typeLit</td><td>✅</td><td>✅</td></tr><tr><td>key-value</td><td>atServer</td><td>✅</td><td>✅</td></tr><tr><td>atHandler</td><td>serviceRoute</td><td>✅</td><td>✅</td></tr><tr><td>route</td><td>serviceRoute</td><td>✅</td><td>✅</td></tr></table><p>The following is the writing of doc and comment after the corresponding syntax block is parsed</p><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI go"><div tabindex="0" class="prism-code language-go codeBlock_rtdJ thin-scrollbar"><div class="codeBlockLines_1zSZ" style="color:#f8f8f2;background-color:#262833"><div class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#6272a4">// syntaxLit doc</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">syntax </span><span class="token operator" style="color:#ff79c6">=</span><span class="token plain"> </span><span class="token string" style="color:#f1fa8c">&quot;v1&quot;</span><span class="token plain"> </span><span class="token comment" style="color:#6272a4">// syntaxLit commnet</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token function" style="color:#8be9fd">info</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#6272a4">// kvLit doc</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  author</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> songmeizi </span><span class="token comment" style="color:#6272a4">// kvLit comment</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token comment" style="color:#6272a4">// typeLit doc</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#ff79c6">type</span><span class="token plain"> Foo </span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token keyword" style="color:#ff79c6">type</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#6272a4">// typeLit doc</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  Bar</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  FooBar</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    </span><span class="token comment" style="color:#6272a4">// filed doc</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">    Name </span><span class="token builtin" style="color:#bd93f9">int</span><span class="token plain"> </span><span class="token comment" style="color:#6272a4">// filed comment</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token punctuation" style="color:#f8f8f2">}</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">@</span><span class="token function" style="color:#8be9fd">server</span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#6272a4">/**</span></div><div class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#6272a4">   * kvLit doc</span></div><div class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#6272a4">   * Enable jwt authentication</span></div><div class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#6272a4">   */</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  jwt</span><span class="token punctuation" style="color:#f8f8f2">:</span><span class="token plain"> Auth </span><span class="token comment" style="color:#6272a4">/**kvLit comment*/</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">service foo</span><span class="token operator" style="color:#ff79c6">-</span><span class="token plain">api</span><span class="token punctuation" style="color:#f8f8f2">{</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#6272a4">// atHandler doc</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  @handler foo </span><span class="token comment" style="color:#6272a4">//atHandler comment</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  </span><span class="token comment" style="color:#6272a4">/*</span></div><div class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#6272a4">   * Route doc</span></div><div class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#6272a4">   * Post request</span></div><div class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#6272a4">   * Route path: foo</span></div><div class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#6272a4">   * Request body: Foo</span></div><div class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#6272a4">   * Response body: Foo</span></div><div class="token-line" style="color:#f8f8f2"><span class="token comment" style="color:#6272a4">   */</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain">  post </span><span class="token operator" style="color:#ff79c6">/</span><span class="token plain">foo </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">Foo</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> returns </span><span class="token punctuation" style="color:#f8f8f2">(</span><span class="token plain">Foo</span><span class="token punctuation" style="color:#f8f8f2">)</span><span class="token plain"> </span><span class="token comment" style="color:#6272a4">// route comment</span><span class="token plain"></span></div><div class="token-line" style="color:#f8f8f2"><span class="token plain"></span><span class="token punctuation" style="color:#f8f8f2">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB">Copy</button></div></div></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/zeromicro/portal/edit/main/docs/design/grammar.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col text--right"><em><small>Last updated on <time datetime="2022-05-04T15:21:01.000Z" class="lastUpdatedDate_nN9m">5/4/2022</time></small></em></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/design/go-zero-features"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Go-Zero Features</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/design/api-dir"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">API directory introduction »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#api-idl-example" class="table-of-contents__link">API IDL example</a></li><li><a href="#api-syntax-structure" class="table-of-contents__link">API syntax structure</a><ul><li><a href="#syntax-statement" class="table-of-contents__link">syntax statement</a></li></ul></li><li><a href="#import-syntax-block" class="table-of-contents__link">Import syntax block</a></li><li><a href="#info-syntax-block" class="table-of-contents__link">info syntax block</a></li><li><a href="#type-syntax-block" class="table-of-contents__link">type syntax block</a></li><li><a href="#service-syntax-block" class="table-of-contents__link">service syntax block</a></li><li><a href="#hidden-channel" class="table-of-contents__link">Hidden channel</a><ul><li><a href="#single-line-comment" class="table-of-contents__link">Single line comment</a></li><li><a href="#java-style-documentation-comments" class="table-of-contents__link">java style documentation comments</a></li></ul></li><li><a href="#doccomment" class="table-of-contents__link">Doc&amp;Comment</a></li></ul></div></div></div></div></main></div></div><footer class="footer_rm3y section_bQ6r"><div class="footer__inner_OWoZ section--inner_6-fB"><div class="footer__column_+a5z footer__column--left_4bpB"><div><img alt="go-zero logo" class="footer__logo_ayM4" height="27" src="/img/footer/go-zero.svg" title="go-zero" width="108"><img alt="stars" height="27" src="https://img.shields.io/github/stars/zeromicro/go-zero?style=social" class="footer__logo_ayM4"><img alt="forks" height="27" src="https://img.shields.io/github/forks/zeromicro/go-zero?style=social" class="footer__logo_ayM4"></div><p class="footer__tagline_b1u+">go-zero is a web and rpc framework that with lots of engineering practices builtin</p><a class="footer__github_okz3 button_f7Ff button--icon_q89D button--secondary_x3vq button--xsmall_fwzy" href="https://github.com/zeromicro/go-zero" rel="noopener noreferrer" target="_blank"><img alt="GitHub logo" height="22" src="/img/github.svg" title="GitHub" width="22">Star us on GitHub</a></div><div class="footer__column_+a5z footer__column--right_FGdI"><div class="footer__links_5pu0"><ul class="footer__items_3d9P"><li class="footer__title_ulcL">zeromicro</li><li class="footer__item_K578"><a class="footer__link_l-+N" href="https://github.com/zeromicro/zero-api" rel="noopener noreferrer" target="_blank">zero-api</a></li><li class="footer__item_K578"><a class="footer__link_l-+N" href="https://github.com/zeromicro/go-queue" rel="noopener noreferrer" target="_blank">go-queue</a></li><li class="footer__item_K578"><a class="footer__link_l-+N" href="https://github.com/zeromicro/awesome-zero" rel="noopener noreferrer" target="_blank">awesome-zero</a></li><li class="footer__item_K578"><a class="footer__link_l-+N" href="https://github.com/zeromicro/zero-examples" rel="noopener noreferrer" target="_blank">zero-example</a></li></ul></div><div class="footer__links_5pu0"><ul class="footer__items_3d9P"><li class="footer__title_ulcL">Community</li><li class="footer__item_K578"><a class="footer__link_l-+N" href="https://github.com/zeromicro/go-zero" rel="noopener noreferrer" target="_blank">GitHub</a></li><li class="footer__item_K578"><a class="footer__link_l-+N" href="https://discord.gg/4JQvC5A4Fe" rel="noopener noreferrer" target="_blank">Discord</a></li></ul></div><div class="footer__links_5pu0"><ul class="footer__items_3d9P"><li class="footer__title_ulcL">Links</li><li class="footer__item_K578"><a class="footer__link_l-+N" href="https://legacy.go-zero.dev" rel="noopener noreferrer" target="_blank">Older Doc</a></li><li class="footer__item_K578"><a class="footer__link_l-+N" href="/docs/blog/blog">Blog</a></li><li class="footer__item_K578"><a class="footer__link_l-+N" href="https://github.com/zeromicro/go-zero/blob/master/ROADMAP.md" rel="noopener noreferrer" target="_blank">Roadmap</a></li><li class="footer__item_K578"><a class="footer__link_l-+N" href="https://landscape.cncf.io/?selected=go-zero" rel="noopener noreferrer" target="_blank">CNCF</a></li></ul></div><div class="footer__links_5pu0"><ul class="footer__items_3d9P"><li class="footer__title_ulcL">Chat</li><li class="footer__item_K578"><img alt="discord" width="80" src="/img/footer/discord.png" class="footer__img_4fbU"></li></ul></div></div></div><div class="footer__bottom_rXtt"><p class="footer__copyright_9e29">Copyright © 2022 zeromicro</p><ul><li class="footer__item_K578"><a class="footer__link_l-+N" href="https://github.com/zeromicro/portal/blob/main/LICENSE">License</a></li></ul><p></p></div></footer></div>
<script src="/assets/js/main.20a29ae8.js" defer="defer"></script>
</body>
</html>